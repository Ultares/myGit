package msg.utils;

import "base.proto";

//
// 命令字定义
//
enum MessageUtils
{
	eMessageUtils_Errorcode_S 		= 0x0101;	// 错误码
	eMessageUtils_Ping_CS			= 0x0102;	// 心跳包
	eMessageUtils_Echo_CS 			= 0x0103;	// 回显测试
	eMessageUtils_Bulletin_S 		= 0x0104;	// 公告
	eMessageUtils_Skipday_S			= 0x0105;	// 隔天信号
	eMessageUtils_SyncUpdate_CS 	= 0x0106;	// 同步更新数据
	eMessageUtils_SyncRemove_CS 	= 0x0107;	// 同步删除数据
	eMessageUtils_ExchangeTicket_C 	= 0x0108;	// 兑换礼包券
	eMessageUtils_ExchangeTicket_S 	= 0x0109;	// 兑换礼包券
	eMessageUtils_NotifyPayReturn_S = 0x010A;	// 通知充值返还
	eMessageUtils_NotifyOpVersion_S = 0x010B;	// 通知运营资源版本
	eMessageUtils_Pay_C				= 0x010C;	// 支付请求
	eMessageUtils_Pay_S 			= 0x010D;	// 支付返回
	eMessageUtils_PayRecords_C 		= 0x010E;	// 支付记录
	eMessageUtils_PayRecords_S 		= 0x010F;	// 支付记录
	eMessageUtils_SendDmpLog_C 		= 0x0110;	// DMP日志
	eMessageUtils_RolenameChanged_S	= 0x0111;	// 通知客户端名字改变
	eMessageUtils_DrawPayReturn_C 	= 0x0112;	// 领取充值返还
	eMessageUtils_DrawPayReturn_S 	= 0x0113;	// 领取充值返还奖励
	eMessageUtils_ChangeRolename_C 	= 0x0114;	// 修改角色名
	eMessageUtils_ChangeRolename_S 	= 0x0115;	// 修改角色名返回
};

//
// 错误码定义
//
enum ErrorcodeUtils
{
	eErrorcodeUtils_Success 				= 0x000000;	// 成功

	eErrorcodeUtils_GiftTicketInvalid		= 0x010801;	// 礼包券非法
	eErrorcodeUtils_GiftTicketExpire 		= 0x010802;	// 礼包券过期了
	eErrorcodeUtils_GiftTicketExchanged		= 0x010803;	// 礼包券已经使用过了
	eErrorcodeUtils_GiftTicketExchangedLimits= 0x010804;// 礼包券兑换次数已达上限
	eErrorcodeUtils_YouExchanged 			= 0x010805;	// 你已经兑换过该礼包券了
	eErrorcodeUtils_YouExchangedLimits 		= 0x010806;	// 您这批次兑换的码太多了
	eErrorcodeUtils_YouExchangedGroup		= 0x010807;	// 您已经兑换过该组的礼包券了
	eErrorcodeUtils_AffcodeInvalid 			= 0x010808;	// 该礼包码不能在本服内使用
	eErrorcodeUtils_YouExchangedConfigID	= 0x010809;	// 您已经兑换过该批次的礼包券了
	eErrorcodeUtils_PayFailed 				= 0x010C01;	// 支付失败
	eErrorcodeUtils_PackageInvalid			= 0x010C02;	// 非法的套餐
	eErrorcodeUtils_MonthCardInvested		= 0x010C03;	// 您已经投资过该月卡
	eErrorcodeUtils_NotSupportPay			= 0x010C04;	// 本服不支持支付

	eErrorcodeUtils_DrawPayReturnTooFast 	= 0x011201;	// 您的手速太快了，奴家还没有准备好
	eErrorcodeUtils_NoPayReturnDrawed 		= 0x011202;	// 您未在测试服充值过
	eErrorcodeUtils_DrawedPayReturn 		= 0x011203;	// 您已经领取过了
	eErrorcodeUtils_NotOpenPayReturn 		= 0x011204;	// 系统未开放充值返还

	eErrorcodeUtils_RenamecardNotEnough 	= 0x011401;	// 改名卡不足
	eErrorcodeUtils_RolenameTooLong 		= 0x011402;	// 你的名字太长了
	eErrorcodeUtils_InvalidRolename 		= 0x011403;	// 你的名字中有非法字符
	eErrorcodeUtils_DuplicationOfName 		= 0x011404;	// 你的名字已经重复了
	eErrorcodeUtils_ServerInternalError 	= 0x011405;	// 服务器内部出错
	eErrorcodeUtils_ChangeRolenameTimeout 	= 0x011406;	// 修改角色名超时
	eErrorcodeUtils_RolenameIsSame 			= 0x011407;	// 你的名字未作任何修改
};

//
// 消息定义
//

// 错误码
message MessageUtilsErrorcode
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_Errorcode_S ];
	optional uint32 				cmd 		= 2;	// 命令字
	optional uint32 				result 		= 3;	// 错误码
};

// PING
message MessageUtilsPing
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_Ping_CS ];
	optional uint64 				timestamp	= 2;	// 服务器当前时间
};

// ECHO
message MessageUtilsEcho
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_Echo_CS ];
	optional uint32 				seq 		= 2;	// SEQ
	optional string 				content 	= 3;	// 内容
};

// 公告
message MessageUtilsBulletin
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_Bulletin_S ];
	required int32 					priority 	= 2;	// 优先级
	required int32 					cycletimes	= 3;	// 轮播次数
	required bool 					showinchat	= 4;	// 是否在聊天中显示
	required string 				message 	= 5;	// 消息体
};

// 隔天
message MessageUtilsSkipday
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_Skipday_S ];
	optional uint64 				timestamp 	= 2;	// 服务器当前时间
};

// 同步更新数据
message MessageUtilsSyncUpdate
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_SyncUpdate_CS ];
	required string 				prefix 		= 2;	// 前缀
	required string 				key 		= 3;	// KEY
	required bytes 					value 		= 4;	// VALUE
};

// 同步删除数据
message MessageUtilsSyncRemove
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_SyncRemove_CS ];
	required string 				prefix 		= 2;	// 前缀
	required string 				key 		= 3;	// KEY
};

// 兑换礼包券
message MessageExchangeGiftTicketRequest
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_ExchangeTicket_C ];
	required string 				ticket 		= 2;	// 礼包券
	required string 				affcode 	= 3;	// 渠道码
};
message MessageExchangeGiftTicketResponse
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_ExchangeTicket_S ];
	required string 				ticket 		= 2;	// 礼包券
	repeated Resource 				gifts 		= 3;	// 礼包
};

// 通知充值返还
message MessageNotifyPayReturn
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_NotifyPayReturn_S ];
	required uint32 				zoneid 		= 2;	// 区服ID
	required uint32 				totalpay 	= 3;	// 总的充值金额
	repeated Resource 				rewards 	= 4;	// 返还的奖励
};

// 通知版本更新
message MessageOperationVersionNotify
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_NotifyOpVersion_S ];
	required uint32 				zoneid 		= 2;	// 区服索引
	required uint32 				method 		= 3;	// 0-非强制, 1-强制 
	required string 				version 	= 4;	// 版本号
};

// 支付相关
message MessagePayRequest
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_Pay_C ];
	required string 				order 		= 2;	// 订单号
	required string 				token 		= 3;	// 令牌
	required string 				credential	= 4;	// 凭据
	required string 				packages 	= 5;	// 套餐ID
};
message MessagePayResponse
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_Pay_S ];
	required string 				order 		= 2;	// 订单号
	required string 				packages 	= 3;	// 套餐ID
	required uint32 				paytimes 	= 4;	// 套餐支付次数
};

// 获取支付记录
message MessagePayRecordsRequest
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_PayRecords_C ];
};
message MessagePayRecordsResponse
{
	message PayRecord
	{
		required string 			packages 	= 1;	// 套餐
		required uint32 			paytimes 	= 2;	// 支付次数
	};

	message MonthCard
	{
		required uint32 			cardid 		= 1; 	// 月卡ID
		required bool 				isdrawed 	= 2;	// 领取日期
		required uint32 			lastdays 	= 3;	// 剩余天数
	};

	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_PayRecords_S ];
	repeated PayRecord 				records 	= 2;	// 记录
	repeated uint32 				viprecords	= 3;	// VIP奖励
	repeated MonthCard 				investcards = 4;	// 投资的月卡
};

// DMP日志
message MessageSendDmpLog
{
	message Target
	{
		required string 			key 		= 1;	// 键
		required string 			value 		= 2;	// 值
	};

	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_SendDmpLog_C ];
	required string 				account 	= 2;	// 账号
	optional uint64 				roleid 		= 3;	// 角色ID
	required string 				logtype 	= 4;	// 日志类型
	required string 				device 		= 5;	// 设备
	required string 				version 	= 6;	// 版本
	repeated Target 				targets 	= 7;	// 目标
};

message MessageChangeRolenameNotify
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_RolenameChanged_S ];
	required uint64 				roleid 		= 2;	// 角色ID
	required string 				rolename 	= 3;	// 角色名
};

// 领取充值返还
message MessageDrawPayReturnRequest
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_DrawPayReturn_C ];
};
message MessageDrawPayReturnResponse
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_DrawPayReturn_S ];
	required uint32 				paymoney 	= 2;	// 充值金额
};

// 修改角色名
message MessageChangeRolenameRequest
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_ChangeRolename_C ];
	required string 				rolename 	= 2;	// 角色名
};
message MessageChangeRolenameResponse
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_ChangeRolename_S ];
	required string 				rolename 	= 2;	// 角色名
};
