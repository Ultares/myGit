package msg.battle;

import "base.proto";

enum BattleResult
{
	eBattleResult_Draw 		= 0;	// 平局
	eBattleResult_Win 		= 1;	// 获胜
	eBattleResult_Lose 		= 2;	// 失败
	eBattleResult_Escape 	= 3;	// 逃跑
};

// 军团
message CombatGroup
{
	// 战士信息
	message Soldier
	{
		// 战斗属性
		message Factor
		{
			required uint32 	maxhp 	 			= 1;	// 生命
			required uint32 	attack				= 2;	// 物攻
			required uint32 	defence 			= 3;	// 物防
			required uint32 	hitchance			= 4;	// 命中率
			required uint32 	dodgechance 		= 5;	// 闪避率
			required uint32 	critchance 			= 6;	// 暴击率
			required uint32 	toughchance 		= 7;	// 抗暴率
			required uint32 	counterchance 		= 8;	// 反击率
			required uint32 	amplifydamage 		= 9;	// 伤害加深
			required uint32 	reducesdamage 		= 10;	// 伤害减免
			required uint32 	ampdmg_percent 		= 11;	// 伤害加深百分比
			required uint32 	reddmg_percent 		= 12;	// 伤害减免百分比
			required uint32 	ignoredefence 		= 13;	// 无视防御
			required uint32 	critmultiple 		= 14;	// 暴击倍率
			required uint32 	counterdamage		= 15;	// 反击伤害
			required uint32 	rawsp 				= 16;	// 初始怒气
			required uint32 	floatresistance 	= 17;	// 浮空抗性
			required uint32		fallingresistance 	= 18;	// 倒地抗性
			required uint32		repulseresistance	= 19;	// 击退抗性
			required uint32		disablingresistance	= 20;	// 重伤抗性
			required uint32		brandresistance		= 21;	// 烙印抗性
			required uint32		controlresistance	= 22;	// 控制抗性
			required uint32		dotresistance		= 23;	// DOT抗性
			required uint32		otherresistance		= 24;	// 其他抗性
		};

		// 技能
		message Spell
		{
			required uint32 	id 		= 1;	// 技能ID
			required uint32 	level 	= 2;	// 等级
		};

		required uint32 	id 			= 1;	// 战士ID
		required uint32 	position	= 2;	// 站位
		required uint32 	level 		= 3;	// 等级
		required uint32 	star 		= 4;	// 星级
		required uint32 	quality 	= 5;	// 品质
		required Factor 	factor 		= 6;	// 角色属性
		repeated Spell 		Spells 		= 7;	// 技能列表
		optional CharState 	status 		= 8;	// 当前数据
	};

	required uint64 	roleid 			= 1;	// 角色ID
	required string 	rolename 		= 2;	// 角色名
	required uint32 	leaderid 		= 3;	// 队长ID
	required uint32 	level 			= 4;	// 角色等级
	required uint32 	firstshot 		= 5;	// 先手值
	required Avatar 	avatar 			= 6;	// 形象
	repeated Soldier 	soldiers		= 7;	// 战士列表
};
