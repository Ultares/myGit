package msg.utils;

import "base.proto";

//
// 命令字定义
//
enum MessageUtils
{
	eMessageUtils_Errorcode_S 		= 0x0101;	// 错误码
	eMessageUtils_Ping_CS			= 0x0102;	// 心跳包
	eMessageUtils_Echo_CS 			= 0x0103;	// 回显测试
	eMessageUtils_Bulletin_S 		= 0x0104;	// 公告
	eMessageUtils_Skipday_S			= 0x0105;	// 隔天信号
	eMessageUtils_SyncUpdate_CS 	= 0x0106;	// 同步更新数据
	eMessageUtils_SyncRemove_CS 	= 0x0107;	// 同步删除数据
	eMessageUtils_ExchangeTicket_C 	= 0x0108;	// 兑换礼包券
	eMessageUtils_ExchangeTicket_S 	= 0x0109;	// 兑换礼包券
	eMessageUtils_GetOpVersion_C 	= 0x010A;	// 获取运营资源版本
	eMessageUtils_NotifyOpVersion_S = 0x010B;	// 通知运营资源版本
};

//
// 错误码定义
//
enum ErrorcodeUtils
{
	eErrorcodeUtils_Success 				= 0x000000;	// 成功

	eErrorcodeUtils_GiftTicketInvalid		= 0x010801;	// 礼包券非法
	eErrorcodeUtils_GiftTicketExpire 		= 0x010802;	// 礼包券过期了
	eErrorcodeUtils_GiftTicketExchanged		= 0x010803;	// 礼包券已经使用过了
	eErrorcodeUtils_GiftTicketExchangedLimits= 0x010804;// 礼包券兑换次数已达上限
	eErrorcodeUtils_YouExchanged 			= 0x010805;	// 你已经兑换过该礼包券了
	eErrorcodeUtils_YouExchangedLimits 		= 0x010806;	// 您这批次兑换的码太多了
	eErrorcodeUtils_YouExchangedGroup		= 0x010807;	// 您已经兑换过该组的礼包券了
};

//
// 消息定义
//

// 错误码
message MessageUtilsErrorcode
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_Errorcode_S ];
	optional uint32 				cmd 		= 2;	// 命令字
	optional uint32 				result 		= 3;	// 错误码
};

// PING
message MessageUtilsPing
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_Ping_CS ];
	optional uint64 				timestamp	= 2;	// 服务器当前时间
};

// ECHO
message MessageUtilsEcho
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_Echo_CS ];
	optional uint32 				seq 		= 2;	// SEQ
	optional string 				content 	= 3;	// 内容
};

// 公告
message MessageUtilsBulletin
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_Bulletin_S ];
	required int32 					priority 	= 2;	// 优先级
	required int32 					cycletimes	= 3;	// 轮播次数
	required bool 					showinchat	= 4;	// 是否在聊天中显示
	required string 				message 	= 5;	// 消息体
};

// 隔天
message MessageUtilsSkipday
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_Skipday_S ];
	optional uint64 				timestamp 	= 2;	// 服务器当前时间
};

// 同步更新数据
message MessageUtilsSyncUpdate
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_SyncUpdate_CS ];
	required string 				prefix 		= 2;	// 前缀
	required string 				key 		= 3;	// KEY
	required bytes 					value 		= 4;	// VALUE
};

// 同步删除数据
message MessageUtilsSyncRemove
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_SyncRemove_CS ];
	required string 				prefix 		= 2;	// 前缀
	required string 				key 		= 3;	// KEY
};

// 兑换礼包券
message MessageExchangeGiftTicketRequest
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_ExchangeTicket_C ];
	required string 				ticket 		= 2;	// 礼包券
};
message MessageExchangeGiftTicketResponse
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_ExchangeTicket_S ];
	required string 				ticket 		= 2;	// 礼包券
	repeated Resource 				gifts 		= 3;	// 礼包
};

// 通知版本更新
message MessageGetOperationVersion
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_GetOpVersion_C ];
};
message MessageOperationVersionNotify
{
	optional MessageUtils 			id 			= 1 [ default = eMessageUtils_NotifyOpVersion_S ];
	required uint32 				zoneid 		= 2;	// 区服索引
	required string 				version 	= 3;	// 版本号
};
