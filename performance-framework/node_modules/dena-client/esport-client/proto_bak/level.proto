package msg.level;

import "base.proto";

//
// 命令字定义
//
enum MessageLevel
{
	eMessageLevel_ChapterList_C 		= 0x1401;	// 获取章节列表
	eMessageLevel_ChapterList_S 		= 0x1402;	// 章节列表返回
	eMessageLevel_Chapter_C 			= 0x1403;	// 获取章节信息
	eMessageLevel_Chapter_S 			= 0x1404;	// 章节信息返回
	eMessageLevel_DrawRewards_C 		= 0x1405;	// 领取关卡满星奖励
	eMessageLevel_DrawRewards_S 		= 0x1406;	// 满星奖励返回
	eMessageLevel_Hosting_C 			= 0x1407;	// 挂机请求
	eMessageLevel_Hosting_S 			= 0x1408;	// 挂机返回
	eMessageLevel_BuyLevelTimes_C		= 0x1409;	// 购买关卡次数
	eMessageLevel_BuyLevelTimes_S 		= 0x140A;	// 购买关卡次数返回
};

//
// 错误码定义
//
enum ErrorcodeLevel
{
	eErrorcodeLevel_InvalidChapterID 	= 0x140301;	// 章节ID非法

	eErrorcodeLevel_HaveDrawRewards		= 0x140501;	// 领取过章节的阶段性奖励
	eErrorcodeLevel_ChapterNotPerfectly = 0x140502;	// 章节星级未达到
	eErrorcodeLevel_ChapterConfigError	= 0x140503;	// 章节配置出错
	eErrorcodeLevel_DrawRewardsBagFull	= 0x140504;	// 领取背包空间不足
	eErrorcodeLevel_StageInvalid		= 0x140505;	// 章节的阶段出错

    eErrorcodeLevel_InvalidLevelID      = 0x140701; // 关卡ID非法
    eErrorcodeLevel_LevelNotPerfectly   = 0x140702; // 关卡未满星通过
    eErrorcodeLevel_LevelTimesLimit     = 0x140703; // 关卡通关次数达到上限
    eErrorcodeLevel_StrengthNotEnough   = 0x140704; // 体力不足
	eErrorcodeLevel_HidenLevelCantHost	= 0x140705;	// 隐藏关卡不能挂机
	eErrorcodeLevel_HostVipLvNotEnough  = 0x140706;	// vip等级不足，不能一键挂机，请充值吧

	eErrorcodeLevel_InvalidLevelID2		= 0x140901;	// 关卡ID非法
	eErrorcodeLevel_IntoTimesError		= 0x140902;	// 进入次数非法
	eErrorcodeLevel_MoneyNotEnough		= 0x140903;	// 亲，您的魂玉不够哦
	eErrorcodeLevel_BuyBuyTimesLimit 	= 0x140904; // 购买次数已达上限
};

// 获取通关的章节列表
message MessageGetChapterList
{
	optional MessageLevel	id		= 1 [ default = eMessageLevel_ChapterList_C ];
};

// 章节列表
message MessageAllChapterList
{
	optional MessageLevel	id		= 1 [ default = eMessageLevel_ChapterList_S ];
	repeated uint32 		list	= 2;			// 章节列表
};

// 获取章节信息
message MessageGetChapter
{
	optional MessageLevel	id		= 1 [ default = eMessageLevel_Chapter_C ];
	required uint32			chapter	= 2;	// 章节
};

// 章节信息返回
message MessageChapterInfo
{
	message LevelInfo
	{
		required uint32		levelid		= 1;	// 关卡ID
		required uint32		grade		= 2;	// 评级
		required uint32 	times 		= 3;	// 当天通关次数
		required uint32 	buytimes 	= 4;	// 购买次数
	};

	optional MessageLevel	id			= 1 [ default = eMessageLevel_Chapter_S ];
	required uint32		 	chapter		= 2;	// 章节ID
	repeated LevelInfo	 	levellist	= 3;	// 关卡信息
	required uint32 		gotreward	= 4;	// 是否领取过章节通关奖励
	repeated uint32		 	addonlevels1= 5 [ packed = true ];	// 额外加成的关卡
	repeated uint32		 	addonlevels2= 6 [ packed = true ];	// 额外加成的关卡
};

// 领取满星奖励
message MessageDrawRewardsRequest
{
	optional MessageLevel 	id 			= 1 [ default = eMessageLevel_DrawRewards_C ];
	required uint32 		chapter 	= 2;	// 章节ID
	required uint32 		stage 		= 3;	// 领取哪阶段的奖励
};
message MessageDrawRewardsResponse
{
	optional MessageLevel 	id 			= 1 [ default = eMessageLevel_DrawRewards_S ];
	required uint32 		chapter 	= 2;	// 章节ID
	required uint32 		stage 		= 3;	// 领取哪阶段的奖励, 从0开始
};

// 挂机
message MessageLevelHosting
{
	optional MessageLevel	id		= 1 [ default = eMessageLevel_Hosting_C ];
	required uint32			levelid	= 2;		// 关卡ID
	optional uint32 		times 	= 3;		// 挂机次数
};
message MessageHostingRewards
{
	message RoundRewards
	{
		required uint32 	round 	= 1;	// 轮次数
		repeated Resource 	rewards = 2;	// 奖励
	};

	optional MessageLevel 		id 		= 1 [ default = eMessageLevel_Hosting_S ];
	required uint32 			levelid = 2;		// 关卡ID
	repeated RoundRewards 		rewards = 3;		// 奖励
	optional HostAbortReason 	reason 	= 4 [ default = eHostAbortReason_None ];		// 中断原因
};

// 购买次数
message MessageBuyLevelTimesRequest
{
	optional MessageLevel 	id 		= 1 [ default = eMessageLevel_BuyLevelTimes_C ];
	required uint32 		levelid = 2;		// 关卡ID
};
message MessageBuyLevelTimesResponse
{
	optional MessageLevel 	id 		= 1 [ default = eMessageLevel_BuyLevelTimes_S ];
	required uint32 		levelid = 2;		// 关卡ID
	required uint32 		buytimes= 3;		// 购买次数
};
